(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{436:function(n,s,a){"use strict";a.r(s);var e=a(2),t=Object(e.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[n._v("#")]),n._v(" 环境")]),n._v(" "),s("ul",[s("li",[n._v("Elasticsearch 8.1")]),n._v(" "),s("li",[n._v("Kibana 8.1")]),n._v(" "),s("li",[n._v("MacOS 10.14.6")])]),n._v(" "),s("h1",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[n._v("#")]),n._v(" 简介")]),n._v(" "),s("p",[n._v("首先我们还是先了解一下，"),s("strong",[n._v("什么是字段别名？"),s("strong",[n._v("大家可能听说过")]),n._v("索引别名")]),n._v("，通过索引的别名可以轻松的切换所需的数据来源与哪一个索引，那么什么是字段别名呢？所谓字段别名，就是索引mapping定义时的备用字段，通过字段别名可以替换搜索请求中的目标字段，字段别名可以用于"),s("code",[n._v("搜索")]),n._v("，"),s("code",[n._v("排序")]),n._v("，"),s("code",[n._v("聚合")]),n._v("，"),s("code",[n._v("高亮")]),n._v("，"),s("code",[n._v("docvalue_fields")]),n._v("，"),s("code",[n._v("stored_fields")]),n._v("，"),s("code",[n._v("suggestions")]),n._v("，下面我们一起来看一下字段别名的详细使用过程")]),n._v(" "),s("h1",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[n._v("#")]),n._v(" 使用")]),n._v(" "),s("h2",{attrs:{id:"定义字段别名规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义字段别名规范"}},[n._v("#")]),n._v(" 定义字段别名规范")]),n._v(" "),s("ul",[s("li",[n._v("必须是一个明确的字段，不能是一个对象或者指向另一个字段别名")]),n._v(" "),s("li",[n._v("在创建字段别名时，字段别名指向的目标字段必须已经存在")]),n._v(" "),s("li",[n._v("如果定义了嵌套的对象，则字段别名必须具有同样的嵌套范围")])]),n._v(" "),s("p",[n._v("字段别名只能指向一个字段，不能同时指向多个字段；")]),n._v(" "),s("p",[n._v("但是可以通过修改"),s("code",[n._v("mapping")]),n._v("中的字段别名设置指向另一个新字段")]),n._v(" "),s("h2",{attrs:{id:"不支持使用字段别名的api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不支持使用字段别名的api"}},[n._v("#")]),n._v(" 不支持使用字段别名的API")]),n._v(" "),s("ul",[s("li",[n._v("首先是不能在写入数据的时候使用字段别名，因为本身字段别名是虚拟的，不存在的，所以不支持写入，同样也不能用于"),s("code",[n._v("copy_to")])]),n._v(" "),s("li",[n._v("因为字段的别名是不存在"),s("code",[n._v("_source")]),n._v("中的，所以搜索请求时的过滤字段也是不会生效的")])]),n._v(" "),s("h1",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[n._v("#")]),n._v(" 测试")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("创建索引，定义字段别名")]),n._v(" "),s("p",[n._v("其中创建了索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v(",各自定义了两个字段别名"),s("code",[n._v("public_count")]),n._v("和"),s("code",[n._v("public_content")]),n._v(",在"),s("code",[n._v("blog1")]),n._v("索引中，"),s("code",[n._v("public_count")]),n._v("指向"),s("code",[n._v("doc.count")]),n._v(","),s("code",[n._v("public_content")]),n._v("指向"),s("code",[n._v("doc.content")]),n._v(";在"),s("code",[n._v("blog2")]),n._v("索引中，"),s("code",[n._v("public_count")]),n._v("指向"),s("code",[n._v("doc_count")]),n._v(","),s("code",[n._v("public_content")]),n._v("指向"),s("code",[n._v("doc_content")]),n._v(";")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('PUT blog1\n{\n  "mappings": {\n    "properties": {\n      "doc": {\n        "properties": {\n          "count": {\n            "type": "long"\n          },\n          "content": {\n            "type": "text",\n            "fields": {\n              "keyword": {\n                "type": "keyword"\n              }\n            }\n          }\n        }\n      },\n      "creater": {\n        "type": "keyword"\n      },\n      "public_count": {\n        "type": "alias",\n        "path": "doc.count"\n      },\n      "public_content": {\n        "type": "alias",\n        "path": "doc.content"\n      }\n    }\n  }\n}\n\n\nPUT blog2\n{\n  "mappings": {\n    "properties": {\n      "doc_count": {\n        "type": "long"\n      },\n      "doc_content": {\n        "type": "text",\n        "fields": {\n          "keyword": {\n            "type": "keyword"\n          }\n        }\n      },\n      "creater": {\n        "type": "keyword"\n      },\n      "public_count": {\n        "type": "alias",\n        "path": "doc_count"\n      },\n      "public_content": {\n        "type": "alias",\n        "path": "doc_content"\n      }\n    }\n  }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("插入测试数据")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('POST _bulk\n{ "index":{"_index":"blog1","_id":"1"}}\n{"creater":"zuiyu1","doc.count":"100","doc.content":"zuiyu elasticsearch "}\n{ "index":{"_index":"blog1","_id":"2"}}\n{"creater":"zuiyu2","doc.count":"200","doc.content":"zuiyu vue"}\n{ "index":{"_index":"blog1","_id":"3"}}\n{"creater":"zuiyu3","doc.count":"300","doc.content":"java demo"}\n{ "index":{"_index":"blog1","_id":"4"}}\n{"creater":"zuiyu4","doc.count":"300","doc.content":"java demo plus"}\n{ "index":{"_index":"blog1","_id":"5"}}\n{"creater":"zuiyu5","doc.count":"300","doc.content":"java pro and elasticsearch"}\n{ "index":{"_index":"blog2","_id":"1"}}\n{"creater":"zuiyu1","doc_count":"10","doc_content":"醉鱼ES小白入门课"}\n{ "index":{"_index":"blog2","_id":"2"}}\n{"creater":"zuiyu2","doc_count":"550","doc_content":"醉鱼前端 vue 小白入门课"}\n{ "index":{"_index":"blog2","_id":"3"}}\n{"creater":"zuiyu3","doc_count":"60","doc_content":"醉鱼java小白入门课"}\n{ "index":{"_index":"blog2","_id":"4"}}\n{"creater":"zuiyu4","doc_count":"60","doc_content":"醉鱼MySQL8.0小白入门课"}\n{ "index":{"_index":"blog2","_id":"5"}}\n{"creater":"zuiyu5","doc_count":"60","doc_content":"醉鱼Redis小白入门课"}\n\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("搜索测试、聚合、排序、高亮、建议")]),n._v(" "),s("p",[n._v("目标是实现搜索索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v("中"),s("code",[n._v("content")]),n._v("内容中包含"),s("code",[n._v("java")]),n._v("的文档,因为两个索引的"),s("code",[n._v("mapping")]),n._v("结构完全不一样，所以使用定义的相同名称的"),s("code",[n._v("public_count")]),n._v("和"),s("code",[n._v("public_content")])]),n._v(" "),s("ul",[s("li",[s("p",[n._v("聚合")]),n._v(" "),s("p",[n._v("使用"),s("code",[n._v("public_count")]),n._v("字段搜索索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v("中"),s("code",[n._v("public_count")]),n._v(" 大于100的文档，对"),s("code",[n._v("public_count")]),n._v("进行聚合分桶")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search?size=0\n{\n  "query": {\n    "range": {\n      "public_count": {\n        "gte": 100\n        }\n    }\n  },\n  "aggs": {\n    "all_agg": {\n      "terms": {\n        "field": "public_count"\n      }\n    }\n  }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("排序")]),n._v(" "),s("p",[n._v("使用"),s("code",[n._v("public_count")]),n._v("字段搜索索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v("中"),s("code",[n._v("public_count")]),n._v("结果大于100的文档,对"),s("code",[n._v("public_count")]),n._v("进行降序输出")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search\n{\n  "query": {\n    "range": {\n      "public_count": {\n        "gte": 100\n        }\n    }\n  },\n  "sort": [\n    {\n      "public_count": {\n        "order": "desc"\n      }\n    }\n  ]\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("高亮")]),n._v(" "),s("p",[n._v("使用"),s("code",[n._v("public_content")]),n._v("字段搜索索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v("中包含"),s("code",[n._v("java")]),n._v("的，高亮输出，结果前后加上"),s("code",[n._v("em")]),n._v("标签")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search\n{\n  "query": {\n    "wildcard": {\n      "public_content": {\n        "value": "*java*"\n      }\n    }\n  },\n  "highlight": {\n    "fields": {\n      "public_content": {\n        "pre_tags": [\n          "&lt;em>"\n        ],\n        "post_tags": [\n          "&lt;/em>"\n        ]\n      }\n    }\n  }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("建议")]),n._v(" "),s("p",[n._v("使用"),s("code",[n._v("public_count")]),n._v("字段搜索索引"),s("code",[n._v("blog1")]),n._v("和"),s("code",[n._v("blog2")]),n._v("中搜索"),s("code",[n._v("public_content")]),n._v("中包含"),s("code",[n._v("java")]),n._v("的文档，输入一个错误单词"),s("code",[n._v("jave")]),n._v(",建议返回"),s("code",[n._v("java")])]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search\n{\n  "query": {\n    "wildcard": {\n      "public_content": {\n        "value": "*java*"\n      }\n    }\n  },\n  "suggest": {\n    "YOUR_SUGGESTION": {\n      "text": "jave",\n      "term": {\n        "field": "public_content"\n      }\n    }\n  }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br")])])]),n._v(" "),s("li",[s("p",[s("code",[n._v("_source")]),n._v("测试")]),n._v(" "),s("p",[n._v("使用"),s("code",[n._v("_source")]),n._v("测试返回字段"),s("code",[n._v("public_count")]),n._v("，"),s("code",[n._v("public_content")]),n._v("，因为字段别名是虚拟的，所以此时是没有返回结果的")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search\n{\n  "query": {\n    "wildcard": {\n      "public_content": {\n        "value": "*java*"\n      }\n    }\n  },\n  "_source": [\n    "public_count",\n    "public_content"\n  ]\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br")])])]),n._v(" "),s("li",[s("p",[n._v("使用"),s("code",[n._v("docvalue_fields")]),n._v("请求字段获取")]),n._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('GET blog*/_search\n{\n  "query": {\n    "wildcard": {\n      "public_content": {\n        "value": "*java*"\n      }\n    }\n  },\n   "docvalue_fields": [\n    "public_count"\n  ]\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br")])])])])])]),n._v(" "),s("h1",{attrs:{id:"使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[n._v("#")]),n._v(" 使用场景")]),n._v(" "),s("p",[n._v("简单总结一下字段别名的使用场景：")]),n._v(" "),s("ul",[s("li",[n._v("文中的例子，可以对同一个人在不同博客网站上写的内容进行统计")]),n._v(" "),s("li",[n._v("获取采集的日志信息，不同的数据源，索引的日志mapping不一样，统计时就可以使用字段别名进行统一的统计")])])])}),[],!1,null,null,null);s.default=t.exports}}]);